/*
	Nepali Calendar jQuery plugin by Mahesh Maharjan 2015
	http://www.mahesh247.com.np
*/
(function(f){var l,h="";e_diff=1944;n_diff=2E3;l={2E3:[2E3,30,32,31,32,31,30,30,30,29,30,29,31],2001:[2001,31,31,32,31,31,31,30,29,30,29,30,30],2002:[2002,31,31,32,32,31,30,30,29,30,29,30,30],2003:[2003,31,32,31,32,31,30,30,30,29,29,30,31],2004:[2004,30,32,31,32,31,30,30,30,29,30,29,31],2005:[2005,31,31,32,31,31,31,30,29,30,29,30,30],2006:[2006,31,31,32,32,31,30,30,29,30,29,30,30],2007:[2007,31,32,31,32,31,30,30,30,29,29,30,31],2008:[2008,31,31,31,32,31,31,29,30,30,29,29,31],2009:[2009,31,31,32,31,
31,31,30,29,30,29,30,30],2010:[2010,31,31,32,32,31,30,30,29,30,29,30,30],2011:[2011,31,32,31,32,31,30,30,30,29,29,30,31],2012:[2012,31,31,31,32,31,31,29,30,30,29,30,30],2013:[2013,31,31,32,31,31,31,30,29,30,29,30,30],2014:[2014,31,31,32,32,31,30,30,29,30,29,30,30],2015:[2015,31,32,31,32,31,30,30,30,29,29,30,31],2016:[2016,31,31,31,32,31,31,29,30,30,29,30,30],2017:[2017,31,31,32,31,31,31,30,29,30,29,30,30],2018:[2018,31,32,31,32,31,30,30,29,30,29,30,30],2019:[2019,31,32,31,32,31,30,30,30,29,30,29,
31],2020:[2020,31,31,31,32,31,31,30,29,30,29,30,30],2021:[2021,31,31,32,31,31,31,30,29,30,29,30,30],2022:[2022,31,32,31,32,31,30,30,30,29,29,30,30],2023:[2023,31,32,31,32,31,30,30,30,29,30,29,31],2024:[2024,31,31,31,32,31,31,30,29,30,29,30,30],2025:[2025,31,31,32,31,31,31,30,29,30,29,30,30],2026:[2026,31,32,31,32,31,30,30,30,29,29,30,31],2027:[2027,30,32,31,32,31,30,30,30,29,30,29,31],2028:[2028,31,31,32,31,31,31,30,29,30,29,30,30],2029:[2029,31,31,32,31,32,30,30,29,30,29,30,30],2030:[2030,31,32,
31,32,31,30,30,30,29,29,30,31],2031:[2031,30,32,31,32,31,30,30,30,29,30,29,31],2032:[2032,31,31,32,31,31,31,30,29,30,29,30,30],2033:[2033,31,31,32,32,31,30,30,29,30,29,30,30],2034:[2034,31,32,31,32,31,30,30,30,29,29,30,31],2035:[2035,30,32,31,32,31,31,29,30,30,29,29,31],2036:[2036,31,31,32,31,31,31,30,29,30,29,30,30],2037:[2037,31,31,32,32,31,30,30,29,30,29,30,30],2038:[2038,31,32,31,32,31,30,30,30,29,29,30,31],2039:[2039,31,31,31,32,31,31,29,30,30,29,30,30],2040:[2040,31,31,32,31,31,31,30,29,30,
29,30,30],2041:[2041,31,31,32,32,31,30,30,29,30,29,30,30],2042:[2042,31,32,31,32,31,30,30,30,29,29,30,31],2043:[2043,31,31,31,32,31,31,29,30,30,29,30,30],2044:[2044,31,31,32,31,31,31,30,29,30,29,30,30],2045:[2045,31,32,31,32,31,30,30,29,30,29,30,30],2046:[2046,31,32,31,32,31,30,30,30,29,29,30,31],2047:[2047,31,31,31,32,31,31,30,29,30,29,30,30],2048:[2048,31,31,32,31,31,31,30,29,30,29,30,30],2049:[2049,31,32,31,32,31,30,30,30,29,29,30,30],2050:[2050,31,32,31,32,31,30,30,30,29,30,29,31],2051:[2051,
31,31,31,32,31,31,30,29,30,29,30,30],2052:[2052,31,31,32,31,31,31,30,29,30,29,30,30],2053:[2053,31,32,31,32,31,30,30,30,29,29,30,30],2054:[2054,31,32,31,32,31,30,30,30,29,30,29,31],2055:[2055,31,31,32,31,31,31,30,29,30,29,30,30],2056:[2056,31,31,32,31,32,30,30,29,30,29,30,30],2057:[2057,31,32,31,32,31,30,30,30,29,29,30,31],2058:[2058,30,32,31,32,31,30,30,30,29,30,29,31],2059:[2059,31,31,32,31,31,31,30,29,30,29,30,30],2060:[2060,31,31,32,32,31,30,30,29,30,29,30,30],2061:[2061,31,32,31,32,31,30,30,
30,29,29,30,31],2062:[2062,30,32,31,32,31,31,29,30,29,30,29,31],2063:[2063,31,31,32,31,31,31,30,29,30,29,30,30],2064:[2064,31,31,32,32,31,30,30,29,30,29,30,30],2065:[2065,31,32,31,32,31,30,30,30,29,29,30,31],2066:[2066,31,31,31,32,31,31,29,30,30,29,29,31],2067:[2067,31,31,32,31,31,31,30,29,30,29,30,30],2068:[2068,31,31,32,32,31,30,30,29,30,29,30,30],2069:[2069,31,32,31,32,31,30,30,30,29,29,30,31],2070:[2070,31,31,31,32,31,31,29,30,30,29,30,30],2071:[2071,31,31,32,31,31,31,30,29,30,29,30,30],2072:[2072,
31,32,31,32,31,30,30,29,30,29,30,30],2073:[2073,31,32,31,32,31,30,30,30,29,29,30,31],2074:[2074,31,31,31,32,31,31,30,29,30,29,30,30],2075:[2075,31,31,32,31,31,31,30,29,30,29,30,30],2076:[2076,31,32,31,32,31,30,30,30,29,29,30,30],2077:[2077,31,32,31,32,31,30,30,30,29,30,29,31],2078:[2078,31,31,31,32,31,31,30,29,30,29,30,30],2079:[2079,31,31,32,31,31,31,30,29,30,29,30,30],2080:[2080,31,32,31,32,31,30,30,30,29,29,30,30],2081:[2081,31,31,32,32,31,30,30,30,29,30,30,30],2082:[2082,30,32,31,32,31,30,30,
30,29,30,30,30],2083:[2083,31,31,32,31,31,30,30,30,29,30,30,30],2084:[2084,31,31,32,31,31,30,30,30,29,30,30,30],2085:[2085,31,32,31,32,30,31,30,30,29,30,30,30],2086:[2086,30,32,31,32,31,30,30,30,29,30,30,30],2087:[2087,31,31,32,31,31,31,30,30,29,30,30,30],2088:[2088,30,31,32,32,30,31,30,30,29,30,30,30],2089:[2089,30,32,31,32,31,30,30,30,29,30,30,30],2090:[2090,30,32,31,32,31,30,30,30,29,30,30,30]};var m=[31,28,31,30,31,30,31,31,30,31,30,31],p=[31,29,31,30,31,30,31,31,30,31,30,31];f.Calendar=function(a,
c){this.$el=f(c);this._init(a);e_eq_date="1-1-1944";n_eq_date="17-9-2000"};f.Calendar.defaults={e_base_YY:1944,e_base_MM:1,e_base_DD:1,n_base_YY:2E3,n_base_MM:9,n_base_DD:17,weeks:"\u0906\u0907\u0924\u092c\u093e\u0930 ;\u0938\u094b\u092e\u092c\u093e\u0930;\u092e\u0919\u094d\u0917\u0932\u092c\u093e\u0930;\u092c\u0941\u0927\u092c\u093e\u0930;\u092c\u093f\u0939\u0940\u092c\u093e\u0930;\u0936\u0941\u0915\u094d\u0930\u092c\u093e\u0930;\u0936\u0928\u093f\u092c\u093e\u0930".split(";"),weekabbrs:"\u0906\u0907\u0924\u092c\u093e\u0930 ;\u0938\u094b\u092e\u092c\u093e\u0930;\u092e\u0919\u094d\u0917\u0932\u092c\u093e\u0930;\u092c\u0941\u0927\u092c\u093e\u0930;\u092c\u093f\u0939\u0940\u092c\u093e\u0930;\u0936\u0941\u0915\u094d\u0930\u092c\u093e\u0930;\u0936\u0928\u093f\u092c\u093e\u0930".split(";"),
months:" \u092c\u0948\u0936\u093e\u0916 \u091c\u0947\u0937\u094d\u0920 \u0905\u0938\u093e\u0930 \u0936\u094d\u0930\u093e\u0935\u0923 \u092d\u093e\u0926\u094d\u0930 \u0905\u0938\u094b\u091c \u0915\u093e\u0930\u094d\u0924\u093f\u0915 \u092e\u0919\u094d\u0938\u093f\u0930 \u092a\u094c\u0937 \u092e\u093e\u0918 \u092b\u093e\u0917\u0941\u0928 \u091a\u0948\u0924\u094d\u0930".split(" "),emonthabbrs:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),displayWeekAbbr:!1,displayMonthAbbr:!1,startIn:0,
ord_month:[31,28,31,30,31,30,31,31,30,31,30,31],leap_month:[31,29,31,30,31,30,31,31,30,31,30,31],nNum:"\u0966\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f".split(""),onDayClick:function(a,c,d){return!1}};f.Calendar.prototype={_init:function(a){this.options=f.extend(!0,{},f.Calendar.defaults,a);this.today=new Date;e_month=this.today.getMonth()+1;e_year=this.today.getFullYear();e_date=this.today.getDate();count_days=this._count_ad_days(e_year,e_month,e_date);today_nep=this._get_nepali_date(count_days);
nep_date=this._get_nepali_date(count_days);this.month=isNaN(this.options.month)||null==this.options.month?nep_date[1]:this.options.month-1;this.year=isNaN(this.options.year)||null==this.options.year?nep_date[0]:this.options.year;this.caldata=this.options.caldata||{};this.eng_eq_date=this._nepaliToEnglish(this._countDaysBS(this.year,this.month,1));this.eng_yr=this.eng_eq_date[0];this.eng_mnth=this.eng_eq_date[1];this.eng_dt=this.eng_eq_date[2];this._generateTemplate();this._initEvents()},_isLeap:function(a){return 0==
a%4?!0:!1},_initEvents:function(){var a=this;this.$el.on("click.calendar","div.fc-row > div",function(){var c=f(this),d=c.index(),b=c.children("div"),d={day:c.children("span.fc-date").text(),month:a.month+1,monthname:a.options.displayMonthAbbr?a.options.monthabbrs[a.month]:a.options.months[a.month],year:a.year,weekday:d+a.options.startIn,weekdayname:a.options.weeks[d+a.options.startIn]};if(d.day)a.options.onDayClick(c,b,d)})},_generateTemplate:function(a){var c=this._getHead(),d=this._getBody(),b;
switch(this.rowTotal){case 4:b="fc-four-rows";break;case 5:b="fc-five-rows";break;case 6:b="fc-six-rows"}this.$cal=f('<div class="fc-calendar '+b+'">').append(c,d);this.$el.find("div.fc-calendar").remove().end().append(this.$cal);a&&a.call()},_getHead:function(){for(var a='<div class="fc-head">',c=0;6>=c;c++)var d=c+this.options.startIn,b=6<d?d-6-1:d,a=6==d?a+'<div class="holiday">':a+"<div>",a=a+(this.options.displayWeekAbbr?this.options.weekabbrs[b]:this.options.weeks[b]),a=a+"</div>";return a+
"</div>"},_getBody:function(){countAD=this._countDaysBS(this.year,this.month,1);eng_eq_cal=this._nepaliToEnglish(countAD);yrr=eng_eq_cal[0];mnth=eng_eq_cal[1];dt=eng_eq_cal[2];e_monthLength=(new Date(yrr,mnth+1,0)).getDate();yr=l[this.year];monthLength=yr[this.month];this.startingDay=""===h?nep_date[4]:h;var a='<div class="fc-body"><div class="fc-row">',c=1;e_day=dt;for(var d=0;7>d;d++){for(var b=0;6>=b;b++){var e=this.startingDay-this.options.startIn,g=0>e?6+e+1:e,e="",k=this.month===today_nep[1]&&
this.year===today_nep[0]&&c===today_nep[2],f="";econtent="";c<=monthLength&&(0<d||b>=g)?(e_day>e_monthLength&&(e_day=1,mnth++,12<=mnth&&(mnth=0)),e+='<span class="fc-date">'+this._engToNepDigit(c)+'</span><span class="e-date">'+e_day+'</span><span class="fc-weekday">'+this.options.weekabbrs[6<b+this.options.startIn?b+this.options.startIn-6-1:b+this.options.startIn]+"</span>",g=(10>this.month?"0"+this.month:this.month)+"-"+(10>c?"0"+c:c),g="n-"+g,(dayData=this.caldata[g])&&(f=dayData),""!==f&&(e+=
"<div>"+f+"</div>"),cal_mn=mnth+1,g=(10>cal_mn?"0"+cal_mn:cal_mn)+"-"+(10>e_day?"0"+e_day:e_day),g="e-"+g,(edayData=this.caldata[g])&&(econtent=edayData),""!==econtent&&(e+="<div>"+econtent+"</div>"),++c,++e_day):k=!1;k=k?"fc-today ":"";if(""!==f||""!==econtent)k+="fc-content";a=6==b?a+(""!==k?'<div class="holiday '+k+' ">':'<div class="holiday">'):a+(""!==k?'<div class="'+k+'">':"<div>");a+=e;a+="</div>"}if(c>monthLength){this.rowTotal=d+1;break}else a+='</div><div class="fc-row">'}return a+"</div></div>"},
_leapYear:function(a){return 0==a%4?!0:!1},_countDaysAD:function(a,c,d){var b=0;for(i=0;i<a-e_diff;i++)if(!0===this._leapYear(e_diff+i))for(j=0;12>j;j++)b+=this.options.leap_month[j];else for(j=0;12>j;j++)b+=this.options.ord_month[j];for(i=0;i<c-1;i++)b=!0===this._leapYear(a)?b+this.options.leap_month[i]:b+this.options.ord_month[i];return b+=parseInt(d)},_countDaysBS:function(a,c,d){var b=0;i=0;for(n=n_diff;i<a-n_diff;i++)for(yr=l[n],n++,j=1;12>=j;j++)b+=yr[j];yr=l[a];for(j=1;j<c;j++)b+=yr[j];return b+=
parseInt(d)},_englishToNepali:function(a){for(var c=0,d=5,b=j=9,e=16,g=2E3;0!=a;){var f=l[g];e++;d++;e>f[j]&&(j++,b++,e=1,h=7==d?0:d);6<d&&(d=0);if(12<b||12<j)g++,b=1,c++,j=1;a--}numDay=d;return[g,b,e,d]},_nepaliToEnglish:function(a){for(var c=0,d=2,b=0,e=0,g=13,b=3,e=1943;0!=a;)c=!0===this._leapYear(e)?this.options.leap_month[b]:this.options.ord_month[b],g++,d++,g>c&&(b++,g=1,12<=b&&(e++,b=0)),6<d&&(d=0),a--;return[e,b,g,d]},_count_ad_days:function(a,c,d){var b=0;for(i=0;i<a-e_diff;i++)if(!0===this._isLeap(e_diff+
i))for(j=0;12>j;j++)b+=p[j];else for(j=0;12>j;j++)b+=m[j];for(i=0;i<c-1;i++)b=!0===this._isLeap(a)?b+p[i]:b+m[i];return b+=parseInt(d)},_get_nepali_date:function(a){for(var c=0,d,b=5,e=j=9,g=16,f=2E3;0!=a;){var h=l[f];g++;b++;g>h[j]&&(j++,e++,g=1,d=7==b?0:b);6<b&&(b=0);if(12<e||12<j)f++,e=1,c++,j=1;a--}numDay=b;return[f,e,g,b,d]},_move:function(a,c,d){if("previous"===c)for("month"===a?(this.year=1<this.month?this.year:--this.year,this.month=1<this.month?--this.month:12,this.eng_yr=0<this.eng_mnth?
this.eng_yr:--this.eng_yr,this.eng_mnth=0<this.eng_mnth?--this.eng_mnth:11):"year"===a&&(this.year=--this.year,this.eng_yr=--this.eng_yr),yr=l[this.year],days=yr[this.month],""===h&&(h=nep_date[4]);0!=days;)0==h&&(h=7),h--,days--;else if("next"===c){yr=l[this.year];days=yr[this.month];for(""===h&&(h=nep_date[4]);0!=days;)h++,7==h&&(h=0),days--;"month"===a?(this.year=12>this.month?this.year:++this.year,this.month=12>this.month?++this.month:1,this.eng_yr=11>this.eng_mnth?this.eng_yr:++this.eng_yr,this.eng_mnth=
11>this.eng_mnth?++this.eng_mnth:0):"year"===a&&(this.year=++this.year,this.eng_yr=--this.eng_yr)}this._generateTemplate(d)},_engToNepDigit:function(a){a=""+a;for(var c="",d=0;a.length>d;d++)c+=this.options.nNum[a[d]];return c},getYear:function(){return this.year},getMonth:function(){return this.month},getMonthName:function(){return this.options.displayMonthAbbr?this.options.monthabbrs[this.month]:this.options.months[this.month]},getEngEqYear:function(){return this.eng_yr},getEngEqMonth:function(){return this.eng_mnth},
getEngEq:function(){nxt_mnth=11<this.eng_mnth+1?0:this.eng_mnth+1;return"("+this.options.emonthabbrs[this.eng_mnth]+" - "+this.options.emonthabbrs[nxt_mnth]+" "+this.eng_yr+")"},getCell:function(a){var c=Math.floor((a+this.startingDay-this.options.startIn)/7);a=a+this.startingDay-this.options.startIn-7*c-1;return this.$cal.find("div.fc-body").children("div.fc-row").eq(c).children("div").eq(a).children("div")},setData:function(a){a=a||{};f.extend(this.caldata,a);this._generateTemplate()},gotoNow:function(a){h=
"";this.month=today_nep[1];this.year=today_nep[0];this.eng_yr=e_year;this.eng_mnth=this.today.getMonth()-1;this._generateTemplate(a)},"goto":function(a,c,d){this.month=a;this.year=c;this._generateTemplate(d)},gotoPreviousMonth:function(a){this._move("month","previous",a)},gotoPreviousYear:function(a){this._move("year","previous",a)},gotoNextMonth:function(a){this._move("month","next",a)},gotoNextYear:function(a){this._move("year","next",a)}};f.fn.myCalendar=function(a){var c=f.data(this,"calendar");
this.each(function(){c?c._init():c=f.data(this,"calendar",new f.Calendar(a,this))});return c}})(jQuery);